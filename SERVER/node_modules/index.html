<!DOCTYPE html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"<
<html>
	<head>
	<style>
		#upbar {
			position: absolute;
			top: 20px;
			left: 140px;
		}
		
		#midbar {
			position: absolute;
			top: 140px;
			left: 20px;
		}
		
		#downbar {
			position: absolute;
			top: 260px;
			left: 140px;
		}
		
		#camera {
			position: absolute;
			top: 20px;
			left: 400px;
		}
		
		#disc {
			position: absolute;
			top: 290px;
			left: 400px;
		}
	</style>
	<script src = "//code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src = "http://128.210.171.227:8887/socket.io/socket.io.js"></script>
          <!-- You need a change this IP address for accessing -->
	

</head>
<body>
	<div id="upbar" >
		<button class="orders" style="padding:0px;margin:0px;" id="forward" style="" value=2>
		<img id = "foward" src="/front" width="115" height="115" >
		</button>
	</div>
	<div id="midbar">

		<button class="orders" style="padding:0px;margin:0px;" id="left" style="" value=4><img src="/left" width="117" height="115"></button>
		<button class="orders" style="padding:0px;margin:0px;" id="start" style="" value=1><img src="/start" width="117" height="115"></button>
		<button class="orders" style="padding:0px;margin:0px;" id="right" style="" value=5><img src="/right" width="117" height="115"></button>
	</div>

	<div id="downbar">
		<button class="orders" style="padding:0px;margin:0px;" id="back" style="" value=3>
			<img src="/back" id="back" width="115" height="115" >
		</button>
	</div>
	
	<div id="camera">
		<h1>Live Feed </h1>
		<iframe id="cameraFrame" src="http://10.185.12.228:8080" frameborder='0' width='400' height='400' marginwidth='0' marginheight='0' scrolling='no'></iframe>
	<button class="orders" style="padding:0px;margin:0px;" id="disc" style="" value=6><img src="/disc" width="50" height="50"></button>
	</div>

        <script>
        		var nowValue = -1;
                $(document).ready(function () {
                        var socket = io.connect('http://128.210.171.227:8887');
                            // You need a change this IP address for accessing
                        var ipadrs;
                        $('.orders').click(function () {
                        		message = $(this).val();
                        		if(message==1){
                        			$(this).val(0);
                        			$(this).children().attr( "src", "/stop"  );
                        		}else if(message==0){
                        			$(this).val(1);
                        			$(this).children().attr( "src", "/start"  );
                        		}
                        		if(nowValue != message){
                        			nowValue = message;
	                                socket.emit('message', message);
                        		}
                        });
		        socket.on('ipadrs', function (data) {
                           	 if( data.length > 10 ) {
                                       // if( data == "192.168.1.6\u00001\u0000\u0000\u0000" )
                                         //       data = "192.168.1.6";
                                        //ipadrs = data; // camera address
                                        ipadrs= $.trim(data);
                                        ipadrs = "http://"+ipadrs;
                                        //console.log('ip:',"http://"+ipadrs);
                                        //cameraStr = "<iframe src='"+ipadrs+"' frameborder='0' width='400' height='400' marginwidth='0' marginheight='0' scrolling='no'></iframe>";
                                        //console.log('ip:',);
                                        //$('#cameraFrame').attr("src",ipadrs);
                                }	
                        });
                });
        </script>
</body>
</html>

