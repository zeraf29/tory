<!DOCTYPE html>
<html>
	<head>
	<style>
		#upbar {
			position: absolute;
			top: 20px;
			left: 140px;
		}
		
		#midbar {
			position: absolute;
			top: 140px;
			left: 20px;
		}
		
		#downbar {
			position: absolute;
			top: 260px;
			left: 140px;
		}
		
		#camera {
			position: absolute;
			top: 20px;
			left: 400px;
		}
		
		#disc {
			position: absolute;
			top: 290px;
			left: 400px;
		}
	</style>
	<script src = "//code.jquery.com/jquery-1.10.2.min.js"></script>
	<script src = "http://128.210.171.227:8887/socket.io/socket.io.js"></script>
          <!-- You need a change this IP address for accessing -->
	
	<script>
	var stateup=0, stateleft=0, statestart=0, stateright=0, statedown=0;
	var val = "0";
	var op = 0;
		function changefoward() {
			if( stateup == 0 && statestart == 1 && op == 0 ) {
				stateup = 1;
				val = "2";
				op = 1;
				document.getElementById('foward').src = "/redup";
			}
			else if( startup == 1 && statestart == 1 ) {
				stateup = 0;
				val = "1";
				document.getElementById('foward').src = "/front";
			}
		}

                function changeleft() {
                        if( stateleft == 0 && statestart == 1 && op == 0) {
                                stateleft = 1;
				val = "4";
                                document.getElementById('left').src = "/redleft";
                        }
                        else if( stateleft == 1 && statestart == 1 ) {
                                stateleft = 0;
				val = "1";
                                document.getElementById('left').src = "/left";
			}
                }


                function changestart() {
                        if( statestart == 0 ) {
                                statestart = 1;
				val = "1";
                                document.getElementById('start').src = "/stop";
                        }
                        else {
                                statestart = 0;
				val = "0";
				op = 0;
                                document.getElementById('start').src = "/start";
				document.getElementById('foward').src = "/front";
				document.getElementById('left').src = "/left";
				document.getElementById('right').src = "/right";
				document.getElementById('back').src = "/back";

                        }
                }

                function changeright() {
                        if( stateright == 0 && statestart == 1 && op == 0) {
                                stateright = 1;
				val = "5";
                                document.getElementById('right').src = "/redright";
                        }
                        else if( stateright == 1 && statestart == 1 ) {
                                stateright = 0;
				val = "1";
                                document.getElementById('right').src = "/right";
                        }
                }

                function changedown() {
                        if( statedown == 0 && statestart == 1 && op == 0) {
                                statedown = 1;
				val = "3";
                                document.getElementById('back').src = "/reddown";
                        }
                        else if( statedown == 1 && statestart == 1 ) {
                                statedown = 0;
				val = "1";
                                document.getElementById('back').src = "/back";
                        }
                }


		function disconnect() {
                        val = "6";
                }
</script>
</head>
<body>
	<div id="upbar">
		<img id = "foward" class="orders" src="/front" width="115" height="115" onclick="changefoward()">
		</div>

	<div id="midbar">
		<img src="/left" class="orders" id="left" width="115" height="115" onclick="changeleft()">
		<img src="/start" class="orders" id="start" width="117" height="115" onclick="changestart()">
		<img src="/right" class="orders" id="right" width="117" height="115" onclick="changeright()">
	</div>

	<div id="downbar">
		<img src="/back" class="orders" id="back" width="115" height="115" onclick="changedown()">
	</div>

	<div id="camera">
		<h1>Live Feed </h1>

	<img src="/disc" class="orders" id="disc" width="50" height="50" onclick="disconnect()">
	</div>

        <script>
                $(document).ready(function () {
                        var socket = io.connect('http://128.210.171.227:8887');
                            // You need a change this IP address for accessing
                        var ipadrs;
                        $('.orders').click(function () {
                                message = val;
                                socket.emit('message', message);
                        });
		        socket.on('ipadrs', function (data) {
                           	 if( data.length > 10 ) {
                                        if( data == "192.168.1.6\u00001\u0000\u0000\u0000" )
                                                data = "192.168.1.6";
                                        ipadrs = data; // camera address
                                        console.log('ip:',ipadrs);
                                        $('#camera').append('<iframe src="http://' +ipadrs +':8080" frameborder="0" width="400" height="400" marginwidth="0" marginheight="0" scrolling="no"></iframe>');
                                }	
                        });
                });
        </script>
</body>
</html>

